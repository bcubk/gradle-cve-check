plugins {
    id 'org.springframework.boot' version '2.7.4'
    id 'io.spring.dependency-management' version '1.0.14.RELEASE'
    id 'java'
}

group = 'com.mimacom'
version = '0.0.1-SNAPSHOT'
sourceCompatibility = '11'

repositories {
    mavenCentral()
}

dependencies {
    constraints {
        implementation("com.fasterxml.jackson.core:jackson-databind:2.13.4") {
            because("Mitigate CVE-2020-36518")
        }
    }

    implementation platform("org.springframework.boot:spring-boot-dependencies:${springBootVersion}")
    implementation platform("org.springframework.cloud:spring-cloud-dependencies:${springCloudVersion}")

    implementation 'org.springframework.boot:spring-boot-starter-actuator'
    implementation 'org.springframework.boot:spring-boot-starter-web'
    implementation 'org.springframework.boot:spring-boot-starter-validation'

    // Open API (swagger) docs
    implementation 'org.springdoc:springdoc-openapi-ui:1.6.11'
    implementation 'org.springdoc:springdoc-openapi-security:1.6.11'

    // Security
    implementation "org.springframework.boot:spring-boot-starter-security"

    // Cache
    implementation "org.springframework.boot:spring-boot-starter-cache"
    implementation "org.springframework.data:spring-data-redis"
    implementation "io.lettuce:lettuce-core:6.2.0.RELEASE"
    implementation 'org.apache.commons:commons-pool2:2.11.1'
    implementation "com.github.ben-manes.caffeine:caffeine"

    //jwt
    implementation "org.bitbucket.b_c:jose4j:0.8.0"

    // Gravity Libraries
    implementation "org.springframework.boot:spring-boot-starter-webflux"

    // Lombok
    annotationProcessor "org.projectlombok:lombok:1.18.24"
    compileOnly "org.projectlombok:lombok:1.18.24"

    // Utils
    implementation 'org.apache.commons:commons-lang3'
    implementation 'org.apache.commons:commons-collections4:4.4'
    implementation 'com.google.guava:guava:31.1-jre'
    implementation 'org.json:json:20220320'
    implementation 'org.apache.httpcomponents:httpclient'

    //test
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
    testImplementation 'org.springframework.security:spring-security-test'
    testImplementation group: 'org.mock-server', name: 'mockserver-netty', version: '5.14.0'
    testImplementation group: 'org.mock-server', name: 'mockserver-client-java', version: '5.14.0'
    testImplementation group: 'org.mock-server', name: 'mockserver-spring-test-listener', version: '5.14.0'
}

tasks.named('test') {
    useJUnitPlatform()
}
